# http协议

## HTTP协议的主要特点

> *无连接*，*无状态* ，简单快速，灵活



## HTTP报文的组成部分



1. 请求报文：
   * 请求行：http方法，页面地址，http协议以及版本
   * 请求头：与服务端交互细节的一些key-value值
   * 空行
   * 请求体
2. 响应报文：
   * 状态行：http状态码什么的
   * 响应头
   * 空行
   * 响应体



## HTTP方法

1. GET——>获取资源
2. POST——>传输资源
3. PUT——>更新资源
4. DELETE——>删除资源
5. HEAD——>获得报文首部



## GET和POST的区别

1. GET在浏览器回退的时候无害，但POST会重新提交请求

2. GET产生的URL地址可以被收藏，而POST不会

3. GET请求会被浏览器主动缓存，POST不会，除非手动设置

4. GET请求只能进行URL编码，而POST支持多种方式

5. GET请求参数会被完整的保留在浏览器历史记录里，而POST参数不会

6. GET请求在URL中传送的参数长度有限制，POST没有

7. 对参数的数据类型，GET只接受ASCII字符，而POST没有限制

8. GET比POST更不安全，因为参数直接暴露在URL上，所以不能传递敏感信息

9. GET参数通过URL传递，POST放在request body中

   **请着重记住1,3,5,6,9**



## HTTP状态码

* 1xx：指示信息---表示请求已接受，继续处理
* 2xx：成功---表示请求已被成功接收
* 3xx：重定向---要完成请求必须进行更进一步的操作
* 4xx：客户端错误---请求有语法错误或请求无法实现
* 5xx：服务器错误---服务器端未能实现合法的请求

详细：

1. 200 OK： 客户端请求成功
2. 206 Partial Content：客户端发送了一个带有Range头的GET请求，服务器完成了它(音频或者视频的时候会出现这种状态码)
3. 301 Moved Permanently：所请求的页面已永久转移到新的URL
4. 302 Found：所请求的页面已临时转移到新的URL
5. 304 Not Modified：直接拿缓存，参见[http缓存机制](http缓存机制.md)
6. 400 Bad Request：客户端请求有语法错，服务器不能正常解析
7. 401 Unauthorized：请求未经授权
8. 403 Forbidden：对请求页面的访问被禁止
9. 404 Not Found：请求资源不存在
10. 500 Internal Server Error：服务器发生不可预测的错误，原来缓存的文档可继续使用
11. 503 Server Unavailable：请求未完成，服务器临时过载或者宕机，一段时间后可能恢复使用



## 持久链接

http1.1版本才支持的特性，而且是默认使用的。http1.0则默认使用的是非持久连接~~废话，人家根本没得选~~

非持久连接下，每个请求应答客户端和服务器都需要新建一个连接，完成之后断开，非常消耗资源

keep-alive字段 开启长连接，使客户端到服务器端的链接持久有效，当浏览器对服务器再次请求时，可以不用在建立一个连接



## 管线化

大致意思是在持久连接情况下，客户端与服务器依然是一问一答的模式，而管线化则将浏览器的多个请求打包一起发送给服务器，服务器集中响应所有请求。前提是*持久连接*

1. 只有GET和HEAD请求可以管线化，而POST有所限制      
2. 初次创建连接时不应启动管线化，因为服务器不一定支持HTTP/1.1版本的协议
3. 管线化不会影响响应到来的顺序(这个说法不明确，貌似是请求和应答的顺序在管线化的情况下依旧是同步的)
4. HTTP/1.1要求服务器支持请求报文管线化，但不要求服务端对响应报文也管线化，只要对于管线化的请求不失败即可
5. 由于上述服务器的问题，所以开启管线化可能并不会带来比较高的性能提升，chrome和firefox默认未开启管线化支持

**详细记住1,2**

